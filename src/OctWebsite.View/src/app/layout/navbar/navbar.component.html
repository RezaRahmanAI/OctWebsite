<header
  class="fixed inset-x-0 top-0 z-50 transform transition-transform duration-500"
  [class.-translate-y-full]="hidden()"
>
  <div class="container-wide relative">
    <nav class="flex items-center justify-between py-4">
      <a
        class="flex items-center gap-3 text-xl font-bold"
        [routerLink]="brand().link"
        (click)="closeMenu()"
      >
        <img [src]="brand().logo" [alt]="brand().name + ' Logo'" class="h-10 w-10" />
        <span class="font-heading text-xl font-semibold tracking-tight">
          {{ brand().name }}
          <ng-container *ngIf="brand().tagline">
            <span class="text-sm font-normal text-slate-500">{{ brand().tagline }}</span>
          </ng-container>
        </span>
      </a>

      <!-- DESKTOP NAV -->
      <div class="hidden items-center lg:flex">
        <ul class="flex items-center gap-7 text-sm font-medium text-slate-600">
          <!-- LEFT: Home + About -->
          <ng-container *ngFor="let link of navLinks()">
            <li *ngIf="link.label === 'Home' || link.label === 'About'">
              <a
                [routerLink]="link.path"
                routerLinkActive="text-primary"
                [routerLinkActiveOptions]="{ exact: link.exact ?? false }"
                class="relative transition-colors duration-300 hover:text-primary"
                (click)="closeAllDropdowns()"
              >
                {{ link.label }}
              </a>
            </li>
          </ng-container>

          <!-- MIDDLE: SERVICES DROPDOWN -->
          <li
            class="relative"
            (mouseenter)="setDropdownOpen('services', true)"
            (mouseleave)="setDropdownOpen('services', false)"
          >
            <button
              type="button"
              class="inline-flex items-center gap-1 text-sm font-semibold text-primary transition hover:text-primary"
              (click)="toggleDropdown('services')"
              [attr.aria-expanded]="servicesMenuOpen()"
            >
              <span>Services</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 transition"
                [class.rotate-180]="servicesMenuOpen()"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M6 9l6 6 6-6"
                />
              </svg>
            </button>

            <!-- FULL-VIEWPORT DROPDOWN -->
            <div
              *ngIf="servicesMenuOpen()"
              class="fixed inset-x-0 z-40 border-y border-slate-100 bg-white shadow-2xl shadow-slate-900/5"
            >
              <!-- inner container centered, but you can widen/narrow max-w-* -->
              <div class="mx-auto max-w-7xl px-4 md:px-6 lg:px-8">
                <div class="grid gap-4 py-6 md:grid-cols-4 md:gap-6 md:py-8">
                  <!-- 1️⃣ Collaboration Models -->
                  <div class="space-y-4 rounded-2xl bg-sky-50/70 p-5">
                    <p class="text-xs font-semibold uppercase tracking-[0.25em] text-primary">
                      Collaboration Models
                    </p>
                    <ul class="space-y-3 text-sm text-slate-800">
                      <li *ngFor="let item of servicesCollaboration()">
                        <a
                          [routerLink]="['/methodology', item.slug]"
                          class="block rounded-xl px-3 py-2 transition hover:bg-white hover:text-primary"
                          (click)="closeAllMenus()"
                        >
                          <div class="flex items-center justify-between text-sm font-semibold">
                            <span>{{ item.label }}</span>
                            <span aria-hidden="true">→</span>
                          </div>
                          <p class="mt-1 text-xs text-slate-600">{{ item.summary }}</p>
                        </a>
                      </li>
                    </ul>
                    <div class="rounded-xl bg-white/90 p-4 shadow-sm shadow-primary/10">
                      <p class="text-sm font-semibold text-slate-800">
                        Want to accelerate your software company?
                      </p>
                      <a
                        routerLink="/contact"
                        class="mt-3 inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-indigo-600/20 transition hover:-translate-y-0.5"
                        (click)="closeAllMenus()"
                      >
                        Hire The Best Team →
                      </a>
                    </div>
                  </div>

                  <!-- 2️⃣ All Services -->
                  <div class="space-y-3 rounded-2xl bg-white p-5 ring-1 ring-slate-100">
                    <div class="flex items-center justify-between">
                      <p class="text-sm font-semibold text-slate-900">All Services</p>
                      <a
                        routerLink="/services"
                        class="text-[11px] font-semibold uppercase tracking-[0.25em] text-primary transition hover:text-primary/80"
                        (click)="closeAllMenus()"
                      >
                        View All
                      </a>
                    </div>
                    <ul class="divide-y divide-slate-100 text-sm text-slate-700">
                      <li
                        *ngFor="let service of featuredServices()"
                        class="py-2 first:pt-0 last:pb-0"
                      >
                        <a
                          [routerLink]="['/services', service.slug]"
                          class="flex items-center justify-between gap-2 rounded-lg px-2 py-1 transition hover:bg-slate-50 hover:text-primary"
                          (click)="closeAllMenus()"
                        >
                          <span class="flex-1">{{ service.title }}</span>
                          <span class="text-xs text-slate-400" aria-hidden="true">→</span>
                        </a>
                      </li>
                    </ul>
                  </div>

                  <!-- 3️⃣ Technologies -->
                  <div class="space-y-3 rounded-2xl bg-white p-5 ring-1 ring-slate-100">
                    <p class="text-sm font-semibold text-slate-900">Technologies</p>
                    <ul class="space-y-2 text-sm text-slate-600">
                      <li *ngFor="let tech of technologies()">
                        {{ tech }}
                      </li>
                    </ul>
                  </div>

                  <!-- 4️⃣ For Hiring -->
                  <div class="space-y-3 rounded-2xl bg-white p-5 ring-1 ring-slate-100">
                    <p class="text-sm font-semibold text-slate-900">For Hiring</p>
                    <ul class="space-y-2 text-sm font-semibold text-blue-600">
                      <li *ngFor="let hire of hiringLinks()">
                        <a
                          [routerLink]="hire.href || '/services'"
                          class="transition hover:underline"
                          (click)="closeAllMenus()"
                        >
                          {{ hire.label }}
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </li>

          <!-- RIGHT: Product, Academy, Blog, Contact -->
          <ng-container *ngFor="let link of navLinks()">
            <li
              *ngIf="
                link.label === 'Product' ||
                link.label === 'Academy' ||
                link.label === 'Careers' ||
                link.label === 'Blog' ||
                link.label === 'Contact'
              "
            >
              <a
                [routerLink]="link.path"
                routerLinkActive="text-primary"
                [routerLinkActiveOptions]="{ exact: link.exact ?? false }"
                class="relative transition-colors duration-300 hover:text-primary"
                (click)="closeAllDropdowns()"
              >
                {{ link.label }}
              </a>
            </li>
          </ng-container>
        </ul>
      </div>

      <!-- MOBILE TOGGLE -->
      <button
        type="button"
        class="inline-flex items-center justify-center rounded-full border border-slate-200 p-2 text-slate-700 lg:hidden"
        (click)="toggleMenu()"
        aria-label="Toggle navigation"
      >
        <svg
          *ngIf="!menuOpen()"
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
        <svg
          *ngIf="menuOpen()"
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </nav>
  </div>

  <!-- MOBILE MENU (unchanged except your existing content) -->
  <div
    class="border-t border-slate-200 bg-white lg:hidden max-h-[80vh] overflow-y-auto"
    *ngIf="menuOpen()"
  >
    <div class="container-wide py-4">
      <ul class="space-y-2 text-sm font-medium text-slate-700">
        <li>
          <a
            routerLink="/"
            class="block rounded-lg px-3 py-2 transition hover:bg-slate-50"
            (click)="closeMenu()"
          >
            Home
          </a>
        </li>

        <li>
          <a
            routerLink="/about"
            class="block rounded-lg px-3 py-2 transition hover:bg-slate-50"
            (click)="closeMenu()"
          >
            About Us
          </a>
        </li>
        <li>
          <a
            routerLink="/services"
            class="block rounded-lg px-3 py-2 transition hover:bg-slate-50"
            (click)="closeMenu()"
          >
            Services
          </a>
        </li>

        <li>
          <a
            routerLink="/careers"
            class="block rounded-lg px-3 py-2 transition hover:bg-slate-50"
            (click)="closeMenu()"
          >
            Careers
          </a>
        </li>

        

        <ng-container *ngFor="let link of navLinks()">
          <li
            *ngIf="
              link.label === 'Product' ||
              link.label === 'Academy' ||
              link.label === 'Careers' ||
              link.label === 'Blog' ||
              link.label === 'Contact'
            "
          >
            <a
              [routerLink]="link.path"
              routerLinkActive="text-primary"
              [routerLinkActiveOptions]="{ exact: link.exact ?? false }"
              class="block rounded-lg px-3 py-2 transition hover:bg-slate-50"
              (click)="closeMenu()"
            >
              {{ link.label }}
            </a>
          </li>
        </ng-container>
      </ul>
    </div>
  </div>
</header>
