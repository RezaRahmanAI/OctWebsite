<!-- sketch reference: /mnt/data/WhatsApp Image 2025-11-24 at 12.19.45_2d59c3ee.jpg -->

<section class="section-padding" appScrollReveal>
  <div class="container-wide">
    <app-section-header
      [eyebrow]="data.header.eyebrow"
      [title]="data.header.title"
      [subtitle]="data.header.subtitle"
    />

    <!-- wrapper is relative so absolutely positioned cards & SVG align on desktop -->
    <div class="mt-12 relative w-full method-wrap md:h-screen">
      <!-- SVG behind cards: uses viewBox 0 0 100 100 so path points are in percentage-space -->
      <svg
        class="absolute inset-0 w-full h-full pointer-events-none"
        viewBox="0 0 100 100"
        preserveAspectRatio="none"
        aria-hidden="true"
      >
        <!-- 1 -> 2 -->
        <path d="M10 18 C15 50, 25 50, 30 60" class="connector" />
        <!-- 2 -> 3 -->
        <path d="M30 60 C35 70, 45 25, 50 18" class="connector" />
        <!-- 3 -> 4 -->
        <path d="M50 18 C55 25, 65 70, 70 62" class="connector" />
        <!-- 4 -> 5 -->
        <path d="M70 62 C75 55, 85 25, 90 18" class="connector" />
      </svg>

      <!-- Cards: on mobile they stack (static flow). On md+ they become absolute and positioned via CSS variables -->
      <div class="method-cards">
        <div
          *ngFor="let step of data.steps; let i = index"
          class="method-card md:absolute relative rounded-3xl border border-slate-100 bg-white p-6 text-center shadow-sm max-w-xs mx-auto"
          appScrollReveal
          [revealDelay]="i * 0.05"
          [revealOffset]="32"
          [style.--left]="positions[i]?.left"
          [style.--top]="positions[i]?.top"
          aria-hidden="false"
        >
          <span class="text-xs font-semibold uppercase tracking-[0.3em] text-accent"
            >Step {{ i + 1 }}</span
          >
          <h4 class="mt-3 text-lg font-semibold text-primary">{{ step.step }}</h4>
          <p class="mt-3 text-sm text-slate-600">{{ step.detail }}</p>
        </div>
      </div>
    </div>
  </div>
</section>
