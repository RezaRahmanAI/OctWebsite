<div class="card-surface mt-2" [class.opacity-60]="loading()">
  <div class="flex items-center justify-between gap-4">
    <div>
      <p class="text-xs font-semibold uppercase text-primary-600">Academy</p>
      <h2 class="text-xl font-semibold text-slate-900">Edit Academy Page Content</h2>
      <p class="text-sm text-slate-600">
        Update hero copy, intro text, kids features, and freelancing courses.
      </p>
    </div>
    <button type="button" class="btn" (click)="submit()" [disabled]="loading()">
      {{ loading() ? 'Saving...' : 'Save Academy Page' }}
    </button>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="mt-6 space-y-8">
    <!-- Hero / Header -->
    <div class="space-y-4">
      <div>
        <p class="text-sm font-semibold text-slate-900">Hero & Intro</p>
        <p class="text-xs text-slate-600">
          This controls the main academy hero section on the public site.
        </p>
      </div>

      <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
        <label class="form-field">
          <span>Header eyebrow</span>
          <input type="text" formControlName="headerEyebrow" />
        </label>
        <label class="form-field">
          <span>Header title</span>
          <input type="text" formControlName="headerTitle" />
        </label>
        <label class="form-field md:col-span-2">
          <span>Header subtitle</span>
          <input type="text" formControlName="headerSubtitle" />
        </label>
        <label class="form-field md:col-span-2">
          <span>Intro</span>
          <textarea rows="3" formControlName="intro"></textarea>
        </label>
      </div>

      <div class="grid gap-4 md:grid-cols-2">
        <label class="form-field">
          <span>Hero video</span>
          <input type="file" accept="video/*" (change)="onHeroVideoSelected($event)" />
          <small *ngIf="form.value.heroVideoFileName; else noHeroVideo">
            Current: {{ form.value.heroVideoFileName }}
          </small>
          <ng-template #noHeroVideo>
            <small>Leave blank to keep the existing video.</small>
          </ng-template>
        </label>
        <label class="form-field">
          <span>Hero video file name</span>
          <input
            type="text"
            formControlName="heroVideoFileName"
            placeholder="/video/academy/hero.mp4"
          />
        </label>
      </div>
    </div>

    <!-- Kids features -->
    <div class="space-y-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-semibold text-slate-900">Kids features</p>
          <p class="text-xs text-slate-600">
            Core benefits shown for kids / early learners in the academy hero section.
          </p>
        </div>
        <button type="button" class="btn ghost" (click)="addFeature()">Add feature</button>
      </div>

      <div class="grid gap-4 md:grid-cols-2" formArrayName="kidsFeatures">
        <ng-container
          *ngFor="let feature of kidsFeatures.controls; let i = index"
          [formGroupName]="i"
        >
          <div class="rounded-xl border border-slate-200 p-4 space-y-3">
            <div class="flex items-center justify-between gap-2">
              <h3 class="text-sm font-semibold text-slate-900">Feature {{ i + 1 }}</h3>
              <button type="button" class="text-xs text-rose-600" (click)="removeFeature(i)">
                Remove
              </button>
            </div>
            <label class="form-field">
              <span>Title</span>
              <input type="text" formControlName="title" />
            </label>
            <label class="form-field">
              <span>Description</span>
              <textarea rows="2" formControlName="description"></textarea>
            </label>
            <label class="form-field">
              <span>Icon</span>
              <input type="text" formControlName="icon" placeholder="e.g. ðŸŽ“" />
            </label>
          </div>
        </ng-container>
      </div>
    </div>

    <!-- Freelancing courses -->
    <div class="space-y-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-semibold text-slate-900">Freelancing courses</p>
          <p class="text-xs text-slate-600">
            Short tiles for the freelancing / career courses shown under the hero.
          </p>
        </div>
        <button type="button" class="btn ghost" (click)="addCourse()">Add course</button>
      </div>

      <div class="grid gap-4 md:grid-cols-2" formArrayName="freelancingCourses">
        <ng-container
          *ngFor="let course of freelancingCourses.controls; let i = index"
          [formGroupName]="i"
        >
          <div class="rounded-xl border border-slate-200 p-4 space-y-3">
            <div class="flex items-center justify-between gap-2">
              <h3 class="text-sm font-semibold text-slate-900">Course {{ i + 1 }}</h3>
              <button type="button" class="text-xs text-rose-600" (click)="removeCourse(i)">
                Remove
              </button>
            </div>
            <label class="form-field">
              <span>Title</span>
              <input type="text" formControlName="title" />
            </label>
            <label class="form-field">
              <span>Description</span>
              <textarea rows="2" formControlName="description"></textarea>
            </label>
            <label class="form-field">
              <span>Icon</span>
              <input type="text" formControlName="icon" placeholder="e.g. ðŸ’»" />
            </label>
          </div>
        </ng-container>
      </div>
    </div>

    <div class="flex justify-end">
      <button type="submit" class="btn" [disabled]="loading()">
        {{ loading() ? 'Saving...' : 'Save Academy Page' }}
      </button>
    </div>
  </form>
</div>
