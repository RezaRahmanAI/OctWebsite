<div class="card-surface mt-2" [class.opacity-60]="loading()">
  <div class="flex items-center justify-between gap-4">
    <div>
      <p class="text-xs font-semibold uppercase text-primary-600">Methodology</p>
      <h2 class="text-xl font-semibold text-slate-900">Hero highlights & comparison</h2>
      <p class="text-sm text-slate-600">Manage the stats, comparison matrix, and contact prompts shown on the methodology page.</p>
    </div>
    <button class="btn" type="button" (click)="submit()" [disabled]="loading()">Save Methodology Page</button>
  </div>

  <form class="mt-6 space-y-8" [formGroup]="form">
    <section class="space-y-4">
      <div>
        <p class="text-sm font-semibold text-slate-900">Hero content</p>
        <p class="text-xs text-slate-600">Controls the hero headline, supporting copy, and media slot.</p>
      </div>

      <div class="grid gap-4 md:grid-cols-2">
        <label class="form-field">
          <span>Eyebrow</span>
          <input type="text" formControlName="headerEyebrow" />
        </label>
        <label class="form-field">
          <span>Title</span>
          <input type="text" formControlName="headerTitle" />
        </label>
        <label class="form-field md:col-span-2">
          <span>Subtitle</span>
          <input type="text" formControlName="headerSubtitle" />
        </label>
        <label class="form-field md:col-span-2">
          <span>Hero description</span>
          <textarea formControlName="heroDescription" rows="3"></textarea>
        </label>
      </div>

      <div class="grid gap-4 md:grid-cols-2">
        <label class="form-field">
          <span>Hero video file name</span>
          <input type="text" formControlName="heroVideoFileName" placeholder="/video/bg.mp4" />
        </label>
        <label class="form-field">
          <span>Hero video URL</span>
          <input type="text" formControlName="heroVideoUrl" placeholder="https://cdn..." />
        </label>
      </div>
    </section>

    <section class="space-y-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-semibold text-slate-900">Hero highlights</p>
          <p class="text-xs text-slate-600">Small stats displayed above the fold.</p>
        </div>
        <button type="button" class="btn ghost" (click)="addHighlight()">Add highlight</button>
      </div>
      <div class="grid gap-3">
        <div class="rounded-xl border border-slate-200 p-4 space-y-3" *ngFor="let control of heroHighlights.controls; let i = index" [formGroup]="control">
          <div class="grid gap-3 md:grid-cols-2">
            <label class="form-field">
              <span>Label</span>
              <input type="text" formControlName="label" />
            </label>
            <label class="form-field">
              <span>Value</span>
              <input type="text" formControlName="value" />
            </label>
          </div>
          <div class="flex justify-end">
            <button type="button" class="btn ghost text-rose-600" (click)="removeHighlight(i)">Remove</button>
          </div>
        </div>
      </div>
    </section>

    <section class="space-y-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-semibold text-slate-900">Matrix columns</p>
          <p class="text-xs text-slate-600">Displayed across the comparison table.</p>
        </div>
        <button class="btn ghost" type="button" (click)="addColumn()">Add column</button>
      </div>
      <div class="grid gap-3 md:grid-cols-2">
        <div class="rounded-xl border border-slate-200 p-4 space-y-3" *ngFor="let control of matrixColumns.controls; let i = index" [formGroup]="control">
          <label class="form-field">
            <span>Key (slug)</span>
            <input type="text" formControlName="key" />
          </label>
          <label class="form-field">
            <span>Label</span>
            <input type="text" formControlName="label" />
          </label>
          <div class="flex justify-end">
            <button class="btn ghost text-rose-600" type="button" (click)="removeColumn(i)">Remove</button>
          </div>
        </div>
      </div>
    </section>

    <section class="space-y-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-semibold text-slate-900">Feature matrix</p>
          <p class="text-xs text-slate-600">Each row shows where a capability applies.</p>
        </div>
        <button class="btn ghost" type="button" (click)="addFeature()">Add feature</button>
      </div>
      <div class="grid gap-3">
        <div class="rounded-xl border border-slate-200 p-4 space-y-3" *ngFor="let control of featureMatrix.controls; let i = index" [formGroup]="control">
          <label class="form-field">
            <span>Name</span>
            <input type="text" formControlName="name" />
          </label>
          <label class="form-field">
            <span>Applies to (comma separated slugs)</span>
            <input type="text" formControlName="appliesTo" />
          </label>
          <div class="flex justify-end">
            <button class="btn ghost text-rose-600" type="button" (click)="removeFeature(i)">Remove</button>
          </div>
        </div>
      </div>
    </section>
  </form>
</div>
